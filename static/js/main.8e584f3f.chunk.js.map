{"version":3,"sources":["utils/constants.ts","data/questions.ts","slices/authSlice.ts","slices/questionnaireSlice.ts","components/common/Input/styles.ts","components/common/Input/index.ts","components/common/Input/Input.tsx","components/common/RadioButtons/styles.ts","components/common/RadioButtons/index.ts","components/common/RadioButtons/RadioButtons.tsx","components/Question/styles.ts","components/Question/index.ts","components/Question/Question.tsx","components/Questionnaire/styles.ts","components/common/ButtonLink/styles.ts","components/common/ButtonLink/index.ts","components/common/ButtonLink/ButtonLink.tsx","components/common/Button/styles.ts","components/common/Button/index.ts","components/common/Button/Button.tsx","components/Recommendation/styles.ts","components/Questionnaire/index.ts","components/Questionnaire/Questionnaire.tsx","utils/questionnaireUtils.ts","slices/recommendationSlice.ts","utils/recommendationUtils.ts","utils/stringUtils.ts","components/Recommendation/index.ts","components/Recommendation/Recommendation.tsx","App.tsx","services/main.api.ts","sagas/userSaga.ts","sagas/recommendationSaga.ts","sagas/rootSaga.ts","app/rootReducer.ts","app/store.ts","styles/theme.ts","index.tsx"],"names":["INPUT_TYPE","RADIO_TYPE","questions","id","type","questionText","placeholder","validationRegex","options","value","name","stepsToSkip","skippable","isPrevQuestionAction","action","prevQuestion","authSlice","createSlice","initialState","token","isLoading","errors","reducers","createUserRequest","state","createUserSuccess","payload","createUserFailed","removeToken","extraReducers","builder","addMatcher","actions","currentIndex","stepsSkipped","answers","firstName","address","children","numberOfChildren","occupation","email","isError","isCreateUserSuccess","questionnaireSlice","nextQuestion","length","currentQuestion","currentAnswer","option","find","item","has","changeAnswer","answerId","answer","setError","StyledInput","styled","input","props","theme","colors","red","grey","Input","onChange","onKeyDown","controlRef","autoFocus","ref","StyledOption","div","StyledLabel","label","RadioButtons","checkedValue","map","checked","htmlFor","StyledQuestion","StyledTitle","h1","StyledErrorText","Question","question","nextAction","dispatch","useDispatch","useSelector","questionnaire","event","target","key","StyledQuestionnaire","StyledQuestionWrapper","main","StyledErrorsWrapper","StyledErrorItem","StyledLink","button","blue","ButtonLink","onClick","StyledButton","purple","white","purpleLighter","Button","disabled","StyledWrapper","StyledLoadingText","StyledRecommendation","StyledLinkWrapper","StyledSubTitle","Questionnaire","shallowEqual","auth","useRef","next","error","RegExp","test","toString","current","focus","finish","requestObj","questionnaireToSend","parseInt","createQuestionnaireToSend","role","Object","keys","join","recommendationSlice","recommendation","fetchRecommendationRequest","fetchRecommendationSuccess","fetchRecommendationFailed","beautifyType","recommendationType","s","toLowerCase","replace","charAt","toUpperCase","slice","Recommendation","useEffect","price","amount","periodicity","App","API_URL","ContentTypeJSON","AuthHeaders","headers","Authorization","API","createUser","a","axios","post","getRecommendation","get","userSaga","call","response","put","data","jwt","status","default","takeLatest","fetchRecommendation","recommendationSaga","rootSaga","all","fork","rootReducer","combineReducers","questionnaireReducer","authReducer","recommendationReducer","persistConfig","version","storage","blacklist","persistedReducer","persistReducer","sagaMiddleware","createSagaMiddleware","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","concat","run","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById"],"mappings":"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","file":"static/js/main.8e584f3f.chunk.js","sourcesContent":["export const INPUT_TYPE = \"INPUT\";\nexport const RADIO_TYPE = \"RADIO\";\n","import { QuestionInput, QuestionRadioButtons } from \"../interfaces/questionnaire.interface\";\nimport { INPUT_TYPE, RADIO_TYPE } from \"../utils/constants\";\n\nconst questions = [\n\t{\n\t\tid: \"firstName\",\n\t\ttype: INPUT_TYPE,\n\t\tquestionText: \"What's your first name?\",\n\t\tplaceholder: \"i.e. Jane\",\n\t\tvalidationRegex: \"^(?!\\\\s*$).+\",\n\t} as QuestionInput,\n\t{\n\t\tid: \"address\",\n\t\ttype: INPUT_TYPE,\n\t\tquestionText: \"What's your address?\",\n\t\tplaceholder: \"i.e. Lohmühlenstraße 65\",\n\t\tvalidationRegex: \"^(?!\\\\s*$).+\",\n\t} as QuestionInput,\n\t{\n\t\tid: \"occupation\",\n\t\ttype: RADIO_TYPE,\n\t\tquestionText: \"What's your occupation?\",\n\t\toptions: [\n\t\t\t{\n\t\t\t\tvalue: \"EMPLOYED\",\n\t\t\t\tname: \"Employed\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: \"SELF_EMPLOYED\",\n\t\t\t\tname: \"Self employed\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: \"STUDENT\",\n\t\t\t\tname: \"Student\",\n\t\t\t},\n\t\t],\n\t} as QuestionRadioButtons,\n\t{\n\t\tid: \"children\",\n\t\ttype: RADIO_TYPE,\n\t\tquestionText: \"Do you have any children?\",\n\t\toptions: [\n\t\t\t{\n\t\t\t\tvalue: \"yes\",\n\t\t\t\tname: \"Yes\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: \"no\",\n\t\t\t\tname: \"No\",\n\t\t\t\tstepsToSkip: 1,\n\t\t\t},\n\t\t],\n\t} as QuestionRadioButtons,\n\t{\n\t\tid: \"numberOfChildren\",\n\t\ttype: INPUT_TYPE,\n\t\tquestionText: \"How many children do you have?\",\n\t\tplaceholder: \"Type a number here\",\n\t\tvalidationRegex: \"^[1-9]\\\\d*$\",\n\t\tskippable: true,\n\t} as QuestionInput,\n\t{\n\t\tid: \"email\",\n\t\ttype: INPUT_TYPE,\n\t\tquestionText: \"What's your email?\",\n\t\tplaceholder: \"i.e. jane.doe@feather-insurance.com\",\n\t\tvalidationRegex: \"^[^\\\\s@]+@[^\\\\s@]+\\\\.[^\\\\s@]+$\",\n\t} as QuestionInput,\n];\n\nexport default questions;\n","import { AnyAction, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { AuthErrors, QuestionnaireToSend } from \"../interfaces/auth.interface\";\nimport { prevQuestion } from \"./questionnaireSlice\";\n\ninterface AuthState {\n\ttoken: string | null;\n\tisLoading: boolean;\n\terrors: AuthErrors | null;\n}\n\nconst initialState: AuthState = {\n\ttoken: null,\n\tisLoading: false,\n\terrors: null,\n};\n\nfunction isPrevQuestionAction(action: AnyAction) {\n\treturn action.type === prevQuestion().type;\n}\n\nexport const authSlice = createSlice({\n\tname: \"auth\",\n\tinitialState,\n\treducers: {\n\t\tcreateUserRequest: (state, action: PayloadAction<QuestionnaireToSend>) => {\n\t\t\tstate.isLoading = true;\n\t\t\tstate.errors = null;\n\t\t},\n\t\tcreateUserSuccess: (state, action: PayloadAction<string>) => {\n\t\t\tstate.isLoading = false;\n\t\t\tstate.token = action.payload;\n\t\t},\n\t\tcreateUserFailed: (state, action: PayloadAction<AuthErrors>) => {\n\t\t\tstate.isLoading = false;\n\t\t\tstate.errors = action.payload;\n\t\t},\n\t\tremoveToken: (state) => {\n\t\t\tstate.token = null;\n\t\t},\n\t},\n\textraReducers: (builder) => {\n\t\tbuilder.addMatcher(isPrevQuestionAction, (state) => {\n\t\t\tstate.errors = null;\n\t\t});\n\t},\n});\n\nexport const {\n\tcreateUserRequest,\n\tcreateUserSuccess,\n\tcreateUserFailed,\n\tremoveToken,\n} = authSlice.actions;\n\nexport default authSlice.reducer;\n","import { AnyAction, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport has from \"lodash.has\";\nimport { RADIO_TYPE } from \"../utils/constants\";\nimport { QuestionnaireState } from \"../interfaces/questionnaire.interface\";\nimport questions from \"../data/questions\";\nimport { createUserSuccess } from \"./authSlice\";\n\ninterface ChangeAnswerPayload {\n\tanswerId: string;\n\tanswer: string;\n}\n\nconst initialState: QuestionnaireState = {\n\tquestions,\n\tcurrentIndex: 0,\n\tstepsSkipped: 0,\n\tanswers: {\n\t\tfirstName: \"\",\n\t\taddress: \"\",\n\t\tchildren: \"\",\n\t\tnumberOfChildren: \"\",\n\t\toccupation: \"\",\n\t\temail: \"\",\n\t},\n\tisError: false,\n};\n\nfunction isCreateUserSuccess(action: AnyAction) {\n\treturn action.type === createUserSuccess(\"\").type;\n}\n\nexport const questionnaireSlice = createSlice({\n\tname: \"questionnaire\",\n\tinitialState,\n\treducers: {\n\t\tnextQuestion: (state) => {\n\t\t\tif (state.currentIndex < state.questions.length - 1) {\n\t\t\t\tlet stepsToSkip = 0;\n\t\t\t\tconst currentQuestion = state.questions[state.currentIndex];\n\t\t\t\tif (currentQuestion.type === RADIO_TYPE) {\n\t\t\t\t\tconst currentAnswer = state.answers[currentQuestion.id];\n\t\t\t\t\tconst option = currentQuestion.options.find(\n\t\t\t\t\t\t(item) => item.value === currentAnswer\n\t\t\t\t\t);\n\t\t\t\t\tif (option && has(option, \"stepsToSkip\")) {\n\t\t\t\t\t\tstepsToSkip += option.stepsToSkip!;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstate.currentIndex += 1 + stepsToSkip;\n\t\t\t\tstate.stepsSkipped = stepsToSkip;\n\t\t\t}\n\t\t},\n\t\tprevQuestion: (state) => {\n\t\t\tconst currentQuestion = questions[state.currentIndex];\n\t\t\tif (currentQuestion.skippable) {\n\t\t\t\tstate.answers = {\n\t\t\t\t\t...state.answers,\n\t\t\t\t\t[currentQuestion.id]: \"\",\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (state.currentIndex - state.stepsSkipped > 0) {\n\t\t\t\tstate.currentIndex -= 1 + state.stepsSkipped;\n\t\t\t\tstate.stepsSkipped = 0;\n\t\t\t}\n\t\t},\n\t\tchangeAnswer: (state, action: PayloadAction<ChangeAnswerPayload>) => {\n\t\t\tconst { answerId, answer } = action.payload;\n\t\t\tstate.answers = {\n\t\t\t\t...state.answers,\n\t\t\t\t[answerId]: answer,\n\t\t\t};\n\t\t},\n\t\tsetError: (state, action: PayloadAction<boolean>) => {\n\t\t\tstate.isError = action.payload;\n\t\t},\n\t},\n\textraReducers: (builder) => {\n\t\tbuilder.addMatcher(isCreateUserSuccess, () => initialState);\n\t},\n});\n\nexport const { nextQuestion, prevQuestion, changeAnswer, setError } = questionnaireSlice.actions;\n\nexport default questionnaireSlice.reducer;\n","import styled from \"styled-components\";\nimport { ThemeInterface } from \"../../../typings/styled-components\";\n\ninterface StyledInputProps {\n\tisError: boolean;\n\ttheme: ThemeInterface;\n}\n\nconst StyledInput = styled.input`\n\twidth: 100%;\n\tborder: ${(props: StyledInputProps) =>\n\t\tprops.isError\n\t\t\t? `2px solid ${props.theme.colors.red}`\n\t\t\t: `2px solid ${props.theme.colors.grey}`};\n\tpadding: 5px;\n\tfont-size: 1.2rem;\n`;\n\nexport { StyledInput };\n","import Input from \"./Input\";\n\nexport default Input;\n","import React, { MutableRefObject } from \"react\";\nimport { StyledInput } from \"./styles\";\n\ninterface InputProps {\n\tvalue: string | number;\n\tplaceholder: string;\n\tonChange(e: React.ChangeEvent<HTMLInputElement>): void;\n\tonKeyDown(e: React.KeyboardEvent<HTMLInputElement>): void;\n\tisError: boolean;\n\tcontrolRef: MutableRefObject<HTMLInputElement | null>;\n}\n\nexport default function Input({\n\tvalue,\n\tonChange,\n\tonKeyDown,\n\tisError,\n\tplaceholder,\n\tcontrolRef,\n}: InputProps) {\n\treturn (\n\t\t<StyledInput\n\t\t\ttype=\"text\"\n\t\t\tplaceholder={placeholder}\n\t\t\tautoFocus\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tisError={isError}\n\t\t\tref={controlRef}\n\t\t\tonKeyDown={onKeyDown}\n\t\t/>\n\t);\n}\n","import styled from \"styled-components\";\n\nconst StyledOption = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: 5px;\n\t&:last-child {\n\t\tmargin-bottom: 0;\n\t}\n`;\n\nconst StyledLabel = styled.label`\n\tmargin-left: 5px;\n\tfont-size: 1.1rem;\n`;\n\nexport { StyledOption, StyledLabel };\n","import RadioButtons from \"./RadioButtons\";\n\nexport default RadioButtons;\n","import React, { MutableRefObject } from \"react\";\nimport { Option } from \"../../../interfaces/questionnaire.interface\";\nimport { StyledOption, StyledLabel } from \"./styles\";\n\ninterface RadioButtonsProps {\n\toptions: Option[];\n\tname: string;\n\tcheckedValue: string | number;\n\tonChange(e: React.ChangeEvent<HTMLInputElement>): void;\n\tonKeyDown(e: React.KeyboardEvent<HTMLInputElement>): void;\n\tcontrolRef: MutableRefObject<HTMLInputElement | null>;\n}\n\nexport default function RadioButtons({\n\toptions,\n\tname,\n\tcheckedValue,\n\tonChange,\n\tonKeyDown,\n\tcontrolRef,\n}: RadioButtonsProps) {\n\treturn (\n\t\t<div>\n\t\t\t{options.map((option) => (\n\t\t\t\t<StyledOption key={option.value}>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tid={option.value}\n\t\t\t\t\t\tvalue={option.value}\n\t\t\t\t\t\tchecked={checkedValue === option.value}\n\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\tref={controlRef}\n\t\t\t\t\t/>\n\t\t\t\t\t<StyledLabel htmlFor={option.value}>{option.name}</StyledLabel>\n\t\t\t\t</StyledOption>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n","import styled from \"styled-components\";\n\nconst StyledQuestion = styled.div`\n\tmin-width: 200px;\n\tmargin-bottom: 35px;\n\n\t@media (min-width: 481px) {\n\t\tmin-width: 400px;\n\t}\n`;\n\nconst StyledTitle = styled.h1`\n\tmargin: 0 0 15px;\n\tfont-size: 2rem;\n\tfont-weight: bold;\n`;\n\nconst StyledErrorText = styled.div`\n\tposition: absolute;\n\tmargin-top: 5px;\n\tcolor: ${({ theme }) => theme.colors.red};\n\tfont-size: 1.2rem;\n`;\n\nexport { StyledQuestion, StyledTitle, StyledErrorText };\n","import Question from \"./Question\";\n\nexport default Question;\n","import React, { MutableRefObject } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { QuestionInput, QuestionRadioButtons } from \"../../interfaces/questionnaire.interface\";\nimport { changeAnswer, setError } from \"../../slices/questionnaireSlice\";\nimport { INPUT_TYPE } from \"../../utils/constants\";\nimport Input from \"../common/Input\";\nimport RadioButtons from \"../common/RadioButtons\";\nimport { StyledQuestion, StyledTitle, StyledErrorText } from \"./styles\";\n\ninterface QuestionProps {\n\tquestion: QuestionInput | QuestionRadioButtons;\n\tcontrolRef: MutableRefObject<HTMLInputElement | null>;\n\tnextAction(): void;\n}\n\nexport default function Question({ question, controlRef, nextAction }: QuestionProps) {\n\tconst dispatch = useDispatch();\n\tconst answers = useSelector((state: RootState) => state.questionnaire.answers);\n\tconst isError = useSelector((state: RootState) => state.questionnaire.isError);\n\n\tconst onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tdispatch(setError(false));\n\t\tdispatch(\n\t\t\tchangeAnswer({\n\t\t\t\tanswerId: question.id,\n\t\t\t\tanswer: question.type === INPUT_TYPE ? event.target.value : event.target.id,\n\t\t\t})\n\t\t);\n\t};\n\n\tconst onKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n\t\tif (event.key === \"Enter\") {\n\t\t\tnextAction();\n\t\t}\n\t};\n\n\treturn (\n\t\t<StyledQuestion>\n\t\t\t<StyledTitle>{question.questionText}</StyledTitle>\n\t\t\t{question.type === INPUT_TYPE ? (\n\t\t\t\t<Input\n\t\t\t\t\tvalue={answers[question.id]}\n\t\t\t\t\tplaceholder={question.placeholder}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tisError={isError}\n\t\t\t\t\tcontrolRef={controlRef}\n\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<RadioButtons\n\t\t\t\t\tname={question.id}\n\t\t\t\t\tcheckedValue={answers[question.id]}\n\t\t\t\t\toptions={question.options!}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\tcontrolRef={controlRef}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isError && (\n\t\t\t\t<>\n\t\t\t\t\t{question.type === INPUT_TYPE ? (\n\t\t\t\t\t\t<StyledErrorText>value is not valid</StyledErrorText>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<StyledErrorText>please select an option</StyledErrorText>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</StyledQuestion>\n\t);\n}\n","import styled from \"styled-components\";\n\nconst StyledQuestionnaire = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\theight: 100vh;\n`;\n\nconst StyledQuestionWrapper = styled.main`\n\tpadding: 0 20px;\n`;\n\nconst StyledErrorsWrapper = styled.div`\n\tmargin-top: 10px;\n`;\n\nconst StyledErrorItem = styled.div`\n\tcolor: ${({ theme }) => theme.colors.red};\n`;\n\nexport { StyledQuestionnaire, StyledQuestionWrapper, StyledErrorsWrapper, StyledErrorItem };\n","import styled from \"styled-components\";\n\nconst StyledLink = styled.button`\n\tborder: 0;\n\tbackground: none;\n\tcursor: pointer;\n\ttext-decoration: underline;\n\tcolor: ${({ theme }) => theme.colors.blue};\n\tfont-size: 1rem;\n`;\n\nexport { StyledLink };\n","import ButtonLink from \"./ButtonLink\";\n\nexport default ButtonLink;\n","import React from \"react\";\nimport { StyledLink } from \"./styles\";\n\ninterface ButtonLinkProps {\n\tchildren: React.ReactNode;\n\tonClick(): void;\n}\n\nexport default function ButtonLink({ children, onClick }: ButtonLinkProps) {\n\treturn (\n\t\t<StyledLink type=\"button\" onClick={onClick}>\n\t\t\t{children}\n\t\t</StyledLink>\n\t);\n}\n","import styled from \"styled-components\";\n\nconst StyledButton = styled.button`\n\theight: 2rem;\n\tborder: none;\n\tbackground-color: ${({ theme }) => theme.colors.purple};\n\tcursor: pointer;\n\tpadding: 4px 15px;\n\tcolor: ${({ theme }) => theme.colors.white};\n\tfont-size: 1rem;\n\n\t&:hover {\n\t\tbackground-color: ${({ theme }) => theme.colors.purpleLighter};\n\t}\n\t&:disabled {\n\t\topacity: 0.3;\n\t}\n`;\n\nexport { StyledButton };\n","import Button from \"./Button\";\n\nexport default Button;\n","import React from \"react\";\nimport { StyledButton } from \"./styles\";\n\ninterface ButtonProps {\n\tchildren: React.ReactNode;\n\tonClick(event: any): void;\n\tdisabled: boolean;\n}\n\nexport default function Button({ children, onClick, disabled }: ButtonProps) {\n\treturn (\n\t\t<StyledButton type=\"button\" onClick={onClick} disabled={disabled}>\n\t\t\t{children}\n\t\t</StyledButton>\n\t);\n}\n","import styled from \"styled-components\";\n\nconst StyledWrapper = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 100vh;\n`;\n\nconst StyledLoadingText = styled.div`\n\tfont-size: 2rem;\n`;\n\nconst StyledRecommendation = styled.main`\n\tpadding: 0 15px;\n`;\n\nconst StyledLinkWrapper = styled.div`\n\tposition: absolute;\n\ttop: 10px;\n\tleft: 10px;\n`;\n\nconst StyledTitle = styled.h1`\n\tmargin: 0 0 10px;\n\tfont-size: 1.5rem;\n\tfont-weight: 500;\n`;\n\nconst StyledSubTitle = styled.div`\n\tmargin-bottom: 10px;\n\tfont-size: 1rem;\n`;\n\nconst StyledOption = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tmargin-bottom: 10px;\n\tborder: 1px solid ${({ theme }) => theme.colors.grey};\n\tpadding: 15px 20px;\n\t&:last-child {\n\t\tmargin-bottom: 0;\n\t}\n`;\n\nconst StyledErrorText = styled.div`\n\ttext-align: center;\n\tcolor: ${({ theme }) => theme.colors.red};\n\tfont-size: 1.2rem;\n`;\n\nexport {\n\tStyledWrapper,\n\tStyledLoadingText,\n\tStyledRecommendation,\n\tStyledLinkWrapper,\n\tStyledTitle,\n\tStyledSubTitle,\n\tStyledOption,\n\tStyledErrorText,\n};\n","import Questionnaire from \"./Questionnaire\";\n\nexport default Questionnaire;\n","import { useRef } from \"react\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"../../app/rootReducer\";\nimport Question from \"../Question\";\nimport { nextQuestion, prevQuestion, setError } from \"../../slices/questionnaireSlice\";\nimport { INPUT_TYPE } from \"../../utils/constants\";\nimport { QuestionInput } from \"../../interfaces/questionnaire.interface\";\nimport { createUserRequest } from \"../../slices/authSlice\";\nimport {\n\tStyledQuestionnaire,\n\tStyledQuestionWrapper,\n\tStyledErrorsWrapper,\n\tStyledErrorItem,\n} from \"./styles\";\nimport ButtonLink from \"../common/ButtonLink\";\nimport Button from \"../common/Button\";\nimport { StyledLinkWrapper } from \"../Recommendation/styles\";\nimport { createQuestionnaireToSend } from \"../../utils/questionnaireUtils\";\n\nexport default function Questionnaire() {\n\tconst dispatch = useDispatch();\n\tconst { questions, currentIndex, answers } = useSelector(\n\t\t(state: RootState) => ({\n\t\t\tquestions: state.questionnaire.questions,\n\t\t\tcurrentIndex: state.questionnaire.currentIndex,\n\t\t\tanswers: state.questionnaire.answers,\n\t\t}),\n\t\tshallowEqual\n\t);\n\n\tconst { isLoading, errors } = useSelector(\n\t\t(state: RootState) => ({\n\t\t\tisLoading: state.auth.isLoading,\n\t\t\terrors: state.auth.errors,\n\t\t}),\n\t\tshallowEqual\n\t);\n\n\tconst controlRef = useRef<HTMLInputElement | null>(null);\n\n\tconst prev = () => {\n\t\tdispatch(setError(false));\n\t\tdispatch(prevQuestion());\n\t\tif (controlRef.current) {\n\t\t\tcontrolRef.current.focus();\n\t\t}\n\t};\n\n\tconst next = () => {\n\t\tconst answer = answers[questions[currentIndex].id];\n\t\tlet error = false;\n\t\tif (questions[currentIndex].type === INPUT_TYPE) {\n\t\t\tconst currentQuestion = questions[currentIndex] as QuestionInput;\n\t\t\tconst regex = new RegExp(currentQuestion.validationRegex);\n\t\t\terror = !regex.test(answer.toString());\n\t\t} else {\n\t\t\terror = !answer;\n\t\t}\n\n\t\tdispatch(setError(error));\n\n\t\tif (!error) {\n\t\t\tdispatch(nextQuestion());\n\t\t}\n\n\t\tif (controlRef.current) {\n\t\t\tcontrolRef.current.focus();\n\t\t}\n\t};\n\n\tconst finish = () => {\n\t\tconst requestObj = createQuestionnaireToSend(answers);\n\t\tdispatch(createUserRequest(requestObj));\n\t};\n\n\tconst nextAction = () => {\n\t\tif (currentIndex === questions.length - 1) {\n\t\t\tfinish();\n\t\t} else {\n\t\t\tnext();\n\t\t}\n\t};\n\n\treturn (\n\t\t<StyledQuestionnaire>\n\t\t\t<StyledQuestionWrapper role=\"main\">\n\t\t\t\t<Question\n\t\t\t\t\tquestion={questions[currentIndex]}\n\t\t\t\t\tcontrolRef={controlRef}\n\t\t\t\t\tnextAction={nextAction}\n\t\t\t\t/>\n\t\t\t\t{currentIndex === questions.length - 1 ? (\n\t\t\t\t\t<Button onClick={finish} disabled={isLoading}>\n\t\t\t\t\t\tFinish Questionnaire\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<Button onClick={next} disabled={isLoading}>\n\t\t\t\t\t\tNext\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\n\t\t\t\t{errors && (\n\t\t\t\t\t<StyledErrorsWrapper>\n\t\t\t\t\t\t{Object.keys(errors).map((key) => (\n\t\t\t\t\t\t\t<StyledErrorItem key={key}>\n\t\t\t\t\t\t\t\t{key}: {errors[key].join(\" \")}\n\t\t\t\t\t\t\t</StyledErrorItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</StyledErrorsWrapper>\n\t\t\t\t)}\n\n\t\t\t\t{currentIndex > 0 && (\n\t\t\t\t\t<StyledLinkWrapper>\n\t\t\t\t\t\t<ButtonLink onClick={prev}>Previous question</ButtonLink>\n\t\t\t\t\t</StyledLinkWrapper>\n\t\t\t\t)}\n\t\t\t</StyledQuestionWrapper>\n\t\t</StyledQuestionnaire>\n\t);\n}\n","import { QuestionnaireToSend } from \"../interfaces/auth.interface\";\nimport { AnswersObj } from \"../interfaces/questionnaire.interface\";\n\nexport function createQuestionnaireToSend(answers: AnswersObj): QuestionnaireToSend {\n\tconst { children, ...questionnaireToSend } = answers;\n\n\treturn {\n\t\t...questionnaireToSend,\n\t\tnumberOfChildren: parseInt(questionnaireToSend.numberOfChildren, 10) || 0,\n\t};\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Recommendation } from \"../interfaces/recommendation.interface\";\n\ninterface RecommendationState {\n\trecommendation: Recommendation[];\n\tisLoading: boolean;\n\terror: string | null;\n}\n\nconst initialState: RecommendationState = {\n\trecommendation: [],\n\tisLoading: true,\n\terror: null,\n};\n\nexport const recommendationSlice = createSlice({\n\tname: \"recommendation\",\n\tinitialState,\n\treducers: {\n\t\tfetchRecommendationRequest: (state, action: PayloadAction<string>) => {\n\t\t\tstate.isLoading = true;\n\t\t\tstate.error = null;\n\t\t},\n\t\tfetchRecommendationSuccess: (state, action: PayloadAction<Recommendation[]>) => {\n\t\t\tstate.isLoading = false;\n\t\t\tstate.recommendation = action.payload;\n\t\t},\n\t\tfetchRecommendationFailed: (state, action: PayloadAction<string>) => {\n\t\t\tstate.isLoading = false;\n\t\t\tstate.error = action.payload;\n\t\t},\n\t},\n});\n\nexport const {\n\tfetchRecommendationRequest,\n\tfetchRecommendationSuccess,\n\tfetchRecommendationFailed,\n} = recommendationSlice.actions;\n\nexport default recommendationSlice.reducer;\n","import { capitalizeFirstLetter } from \"./stringUtils\";\n\nexport function beautifyType(recommendationType: string): string {\n\treturn capitalizeFirstLetter(recommendationType.toLowerCase().replace(\"_\", \" \"));\n}\n\nexport function generateSubscriptionPrice(price: number, periodicity: string) {\n\treturn `€${price} per ${periodicity.toLowerCase()}`;\n}\n","export function capitalizeFirstLetter(s: string): string {\n\treturn s.charAt(0).toUpperCase() + s.slice(1);\n}\n","import Recommendation from \"./Recommendation\";\n\nexport default Recommendation;\n","import { useEffect } from \"react\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { RootState } from \"../../app/rootReducer\";\nimport { fetchRecommendationRequest } from \"../../slices/recommendationSlice\";\nimport ButtonLink from \"../common/ButtonLink\";\nimport {\n\tStyledWrapper,\n\tStyledLoadingText,\n\tStyledRecommendation,\n\tStyledLinkWrapper,\n\tStyledTitle,\n\tStyledSubTitle,\n\tStyledOption,\n\tStyledErrorText,\n} from \"./styles\";\nimport { beautifyType, generateSubscriptionPrice } from \"../../utils/recommendationUtils\";\nimport { removeToken } from \"../../slices/authSlice\";\n\ninterface RecommendationProps {\n\ttoken: string;\n}\n\nexport default function Recommendation({ token }: RecommendationProps) {\n\tconst dispatch = useDispatch();\n\tconst { recommendation, isLoading, error } = useSelector(\n\t\t(state: RootState) => ({\n\t\t\trecommendation: state.recommendation.recommendation,\n\t\t\tisLoading: state.recommendation.isLoading,\n\t\t\terror: state.recommendation.error,\n\t\t}),\n\t\tshallowEqual\n\t);\n\n\tuseEffect(() => {\n\t\tdispatch(fetchRecommendationRequest(token));\n\t}, [token, dispatch]);\n\n\tconst questionnaireAgain = () => {\n\t\tdispatch(removeToken());\n\t};\n\n\treturn (\n\t\t<StyledWrapper>\n\t\t\t{isLoading ? (\n\t\t\t\t<StyledLoadingText>Loading recommendations...</StyledLoadingText>\n\t\t\t) : (\n\t\t\t\t<StyledRecommendation role=\"main\">\n\t\t\t\t\t<StyledLinkWrapper>\n\t\t\t\t\t\t<ButtonLink onClick={questionnaireAgain}>\n\t\t\t\t\t\t\tTake the questionnaire again\n\t\t\t\t\t\t</ButtonLink>\n\t\t\t\t\t</StyledLinkWrapper>\n\t\t\t\t\t<StyledTitle>We got your recommendation</StyledTitle>\n\t\t\t\t\t<StyledSubTitle>\n\t\t\t\t\t\tBased on your answers, this is what make sense for you and what you should\n\t\t\t\t\t\tpay.\n\t\t\t\t\t</StyledSubTitle>\n\t\t\t\t\t{!error ? (\n\t\t\t\t\t\trecommendation.map((item) => (\n\t\t\t\t\t\t\t<StyledOption key={item.type}>\n\t\t\t\t\t\t\t\t<div>{beautifyType(item.type)}</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{generateSubscriptionPrice(\n\t\t\t\t\t\t\t\t\t\titem.price.amount,\n\t\t\t\t\t\t\t\t\t\titem.price.periodicity\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</StyledOption>\n\t\t\t\t\t\t))\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<StyledErrorText>{error}</StyledErrorText>\n\t\t\t\t\t)}\n\t\t\t\t</StyledRecommendation>\n\t\t\t)}\n\t\t</StyledWrapper>\n\t);\n}\n","import { useSelector } from \"react-redux\";\nimport { RootState } from \"./app/rootReducer\";\nimport Questionnaire from \"./components/Questionnaire\";\nimport Recommendation from \"./components/Recommendation\";\n\nfunction App() {\n\tconst token = useSelector((state: RootState) => state.auth.token);\n\treturn <>{token ? <Recommendation token={token} /> : <Questionnaire />}</>;\n}\n\nexport default App;\n","import axios, { AxiosResponse } from \"axios\";\nimport { UserCreation, QuestionnaireToSend } from \"../interfaces/auth.interface\";\nimport { Recommendation } from \"../interfaces/recommendation.interface\";\n\nconst API_URL = \"https://challenge-dot-popsure-204813.appspot.com\";\nconst ContentTypeJSON = { \"Content-Type\": \"application/json\" };\n\nconst AuthHeaders = (token: string) => ({\n\theaders: {\n\t\t...ContentTypeJSON,\n\t\tAuthorization: `Bearer ${token}`,\n\t},\n});\n\nconst createUser = async (\n\tquestionnaire: QuestionnaireToSend\n): Promise<AxiosResponse<UserCreation>> =>\n\taxios.post<UserCreation>(`${API_URL}/user`, questionnaire, {\n\t\theaders: {\n\t\t\t...ContentTypeJSON,\n\t\t},\n\t});\n\nconst getRecommendation = async (token: string): Promise<AxiosResponse<Recommendation[]>> =>\n\taxios.get<Recommendation[]>(`${API_URL}/recommendation`, AuthHeaders(token));\n\nconst API = {\n\tcreateUser,\n\tgetRecommendation,\n};\n\nexport default API;\n","import { PayloadAction } from \"@reduxjs/toolkit\";\nimport { call, put, takeLatest } from \"redux-saga/effects\";\nimport { QuestionnaireToSend } from \"../interfaces/auth.interface\";\nimport API from \"../services/main.api\";\nimport { createUserRequest, createUserSuccess, createUserFailed } from \"../slices/authSlice\";\n\nfunction* createUser(action: PayloadAction<QuestionnaireToSend>) {\n\ttry {\n\t\tconst response = yield call(API.createUser, action.payload);\n\t\tyield put(createUserSuccess(response.data.jwt));\n\t} catch (error) {\n\t\tif (error.response && error.response.status === 422) {\n\t\t\tyield put(createUserFailed(error.response.data.errors));\n\t\t} else {\n\t\t\tyield put(\n\t\t\t\tcreateUserFailed({\n\t\t\t\t\tdefault: [\"An error occured, please try again later\"],\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n}\n\nfunction* userSaga() {\n\tyield takeLatest(createUserRequest, createUser);\n}\n\nexport default userSaga;\n","import { PayloadAction } from \"@reduxjs/toolkit\";\nimport { call, put, takeLatest } from \"redux-saga/effects\";\nimport API from \"../services/main.api\";\nimport { removeToken } from \"../slices/authSlice\";\nimport {\n\tfetchRecommendationRequest,\n\tfetchRecommendationSuccess,\n\tfetchRecommendationFailed,\n} from \"../slices/recommendationSlice\";\n\nfunction* fetchRecommendation(action: PayloadAction<string>) {\n\ttry {\n\t\tconst response = yield call(API.getRecommendation, action.payload);\n\t\tyield put(fetchRecommendationSuccess(response.data));\n\t} catch (error) {\n\t\tif (error.response && error.response.status === 401) {\n\t\t\tyield put(removeToken());\n\t\t} else {\n\t\t\tyield put(\n\t\t\t\tfetchRecommendationFailed(\"An error occured trying to load your recommendation\")\n\t\t\t);\n\t\t}\n\t}\n}\n\nfunction* recommendationSaga() {\n\tyield takeLatest(fetchRecommendationRequest, fetchRecommendation);\n}\n\nexport default recommendationSaga;\n","import { fork, all } from \"redux-saga/effects\";\nimport userSaga from \"./userSaga\";\nimport recommendationSaga from \"./recommendationSaga\";\n\nexport default function* rootSaga() {\n\tyield all([fork(userSaga), fork(recommendationSaga)]);\n}\n","import { combineReducers } from \"@reduxjs/toolkit\";\nimport questionnaireReducer from \"../slices/questionnaireSlice\";\nimport authReducer from \"../slices/authSlice\";\nimport recommendationReducer from \"../slices/recommendationSlice\";\n\nconst rootReducer = combineReducers({\n\tquestionnaire: questionnaireReducer,\n\tauth: authReducer,\n\trecommendation: recommendationReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\nimport {\n\tpersistStore,\n\tpersistReducer,\n\tFLUSH,\n\tREHYDRATE,\n\tPAUSE,\n\tPERSIST,\n\tPURGE,\n\tREGISTER,\n} from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\nimport createSagaMiddleware from \"redux-saga\";\nimport rootSaga from \"../sagas/rootSaga\";\nimport rootReducer from \"./rootReducer\";\n\nconst persistConfig = {\n\tkey: \"root\",\n\tversion: 1,\n\tstorage,\n\tblacklist: [\"recommendation\"],\n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\n\nconst sagaMiddleware = createSagaMiddleware();\n\nexport const store = configureStore({\n\treducer: persistedReducer,\n\tmiddleware: getDefaultMiddleware({\n\t\tserializableCheck: {\n\t\t\tignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n\t\t},\n\t}).concat(sagaMiddleware),\n});\n\nsagaMiddleware.run(rootSaga);\n\nexport const persistor = persistStore(store);\n","const theme = {\n\tcolors: {\n\t\twhite: \"#ffffff\",\n\t\tgrey: \"#bbc8d3\",\n\t\tblue: \"#0000ee\",\n\t\tpurple: \"#5b4aee\",\n\t\tpurpleLighter: \"#8d81f3\",\n\t\tred: \"#d3190c\",\n\t},\n};\nexport default theme;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ThemeProvider } from \"styled-components\";\nimport { Provider } from \"react-redux\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { store, persistor } from \"./app/store\";\nimport theme from \"./styles/theme\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<PersistGate loading={null} persistor={persistor}>\n\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t<App />\n\t\t\t\t</ThemeProvider>\n\t\t\t</PersistGate>\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}